<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interactive Gamelan â€” Piano Layout (Real Image)</title>
  <meta name="description" content="Chromatic gamelan (C4â†’C5) with piano-style layout and real-image pads. Ultra-low latency." />
  <style>
    :root{
      --brand:#0ea5e9; --ink:#0f172a; --muted:#64748b; --bg:#f6f7fb; --card:#ffffff;
      --whiteKey:#e7edf4; --whiteActive:#cfe9ff;
      --blackKey:#1f2937; --blackActive:#334155;
      --padImage: url('assets/gamelan.jpg'); /* optional default if you add the file to repo */
    }
    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink); background:var(--bg); }
    header{ background:linear-gradient(90deg, #0369a1, #0ea5e9); color:#fff; padding:18px 16px; }
    header h1{ margin:0; font-size:20px; }
    main{ max-width:1100px; margin:24px auto; padding:0 16px; }
    .bar{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .pill{ background:rgba(255,255,255,.9); color:#0f172a; padding:6px 10px; border-radius:999px; font-size:13px; }
    .status{ color:var(--muted); margin:10px 0 14px; min-height:1.2em; }
    .row{ display:flex; gap:0; position:relative; }

    .kb{ position:relative; user-select:none; -webkit-user-select:none; touch-action: manipulation; }
    .whites{ display:grid; grid-template-columns: repeat(8, 1fr); gap:6px; }
    .blacksWrap{ position:relative; height:0; }
    .blacks{ position:absolute; top:-72px; left:0; right:0; display:grid; grid-template-columns: repeat(14, 1fr); pointer-events:none; }
    @media (max-width: 760px){ .blacks{ top:-56px; } }

    /* Pads use the provided image as a background. We overlay subtle gloss to look like a bronze bar photo. */
    .pad{
      appearance:none; border:0; cursor:pointer; text-align:center; pointer-events:auto;
      display:flex; flex-direction:column; align-items:center; justify-content:flex-end;
      font-weight:700; gap:6px; transition: transform .02s ease;
      background-image: var(--padImage), linear-gradient(180deg, rgba(255,255,255,.25), rgba(255,255,255,0));
      background-size: cover;
      background-position: center;
      color:#0f172a;
    }
    .pad.white{
      height: 160px; border-radius:14px; padding-bottom:10px;
      box-shadow: inset 0 0 0 1px #d1d9e0, 0 8px 18px rgba(0,0,0,.08);
      border:1px solid #e5e7eb;
    }
    .pad.white:active, .pad.white.active{ transform: translateY(1px) scale(.998); filter: saturate(1.1) brightness(1.04); }

    .pad.black{
      height: 110px; border-radius:12px; margin: 0 0; padding-bottom:8px;
      box-shadow: inset 0 0 0 1px #0b1220, 0 8px 16px rgba(0,0,0,.25);
      color:#e5eef6; border:1px solid #0b1220;
      background-blend-mode: multiply; /* slightly darken for black-key look */
      filter: saturate(0.9) brightness(0.85);
    }
    .pad.black:active, .pad.black.active{ transform: translateY(1px) scale(.998); filter: brightness(0.95); }

    .note{ font-size:14px; text-shadow: 0 1px 2px rgba(0,0,0,.25); }
    .kbd{ font-size:11px; opacity:.95; background:rgba(255,255,255,.85); color:#0f172a; border-radius:6px; padding:2px 6px; border:1px solid rgba(0,0,0,.06); margin-bottom:6px; }
    .black .kbd{ background:rgba(15,23,42,.85); color:#fff; border-color:rgba(255,255,255,.15); }

    .controls{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin:12px 0 18px; }
    button.ctrl{ padding:8px 12px; border-radius:10px; border:1px solid #e5e7eb; background:#fff; cursor:pointer; }
    button.ctrl.primary{ background:#0ea5e9; color:#fff; border-color:transparent; }
    input[type="file"]{ display:none; }
    label.file{ padding:8px 12px; border:1px dashed #87c9ff; color:#0369a1; border-radius:10px; cursor:pointer; background:#eef7ff; }

    footer{ text-align:center; color:var(--muted); padding:24px 0 40px; }

    .blacks > .pad{ pointer-events:auto; }
    .k-cs { grid-column: 2 / span 2; }
    .k-ds { grid-column: 4 / span 2; }
    .k-fs { grid-column: 8 / span 2; }
    .k-gs { grid-column:10 / span 2; }
    .k-as { grid-column:12 / span 2; }
  </style>
</head>
<body>
  <header>
    <h1>Interactive Gamelan â€” Piano Layout (Real Image)</h1>
  </header>

  <main>
    <div class="bar">
      <span class="pill">Chromatic: C4 â†’ C5 (13 notes)</span>
      <span class="pill">Piano-style layout â€¢ Ultra-low latency</span>
      <span class="pill">Use your own gamelan photo</span>
      <a class="pill" href="idea.html">Idea â†’</a>
    </div>

    <div class="controls">
      <button id="unlock" class="ctrl primary">Enable Sound</button>
      <button id="mute" class="ctrl">Mute</button>
      <label class="pill">Gain <input id="gain" type="range" min="0" max="1.4" step="0.01" value="0.9"></label>
      <label class="pill">Decay <input id="decay" type="range" min="0.2" max="4" step="0.05" value="1.6"></label>
      <label class="pill">Damping <input id="damp" type="range" min="200" max="12000" step="50" value="8500"></label>

      <label for="img" class="file">ğŸ“· Upload Gamelan Image</label>
      <input id="img" type="file" accept="image/*" />
    </div>

    <div id="kb" class="kb" aria-label="Gamelan keyboard">
      <div id="whites" class="whites"></div>
      <div class="blacksWrap">
        <div id="blacks" class="blacks"></div>
      </div>
    </div>

    <div id="status" class="status">Tap â€œEnable Soundâ€ once to unlock audio. Then upload your photo or keep the default.</div>
  </main>

  <script type="module" src="./main.js"></script>

  <footer>
    <p>Â© 2025 â€¢ Built for learning â€¢ Optimized for minimal strike latency</p>
  </footer>
</body>
</html>
